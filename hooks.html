
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Using Gossip &mdash; gossip 1.0.0 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="gossip 1.0.0 documentation" href="index.html" />
    <link rel="next" title="Definining Hooks in Groups" href="hook_groups.html" />
    <link rel="prev" title="Welcome to gossip’s documentation!" href="index.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="hook_groups.html" title="Definining Hooks in Groups"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to gossip’s documentation!"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">gossip 1.0.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="using-gossip">
<h1>Using Gossip<a class="headerlink" href="#using-gossip" title="Permalink to this headline">¶</a></h1>
<p>Gossip is all about defining entry points, called hooks, that follow the <a class="reference external" href="http://en.wikipedia.org/wiki/Observer_pattern">Observer pattern</a>. A hook can be defined, have functions (or handlers) registered to it, and then triggered at some point to notify the observers of an event.</p>
<p>All hooks in gossip must be identified by a <strong>name</strong>, which uniquely identifies the hook.</p>
<div class="section" id="a-basic-example">
<h2>A Basic Example<a class="headerlink" href="#a-basic-example" title="Permalink to this headline">¶</a></h2>
<p>To register a handler for a hook, just user <tt class="xref py py-func docutils literal"><span class="pre">gossip.register()</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">gossip</span>


<span class="gp">&gt;&gt;&gt; </span><span class="nd">@gossip.register</span><span class="p">(</span><span class="s">&#39;hook_name&#39;</span><span class="p">)</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="s">&#39;Called&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>After we registered the handler, we can trigger it at any time:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">gossip</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s">&#39;hook_name&#39;</span><span class="p">)</span>
<span class="go">Called</span>
</pre></div>
</div>
</div>
<div class="section" id="hook-arguments">
<h2>Hook Arguments<a class="headerlink" href="#hook-arguments" title="Permalink to this headline">¶</a></h2>
<p>Hooks can receive arguments, which are then passed to the handlers.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nd">@gossip.register</span><span class="p">(</span><span class="s">&quot;with_arguments&quot;</span><span class="p">)</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="s">&quot;Called: {0} {1} {2}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">))</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">gossip</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s">&quot;with_arguments&quot;</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="go">Called: 1 2 3</span>
</pre></div>
</div>
<p>Note that argument mismatches means a runtime error:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">gossip</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s">&quot;with_arguments&quot;</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> 
<span class="gt">Traceback (most recent call last):</span>
 <span class="c">...</span>
<span class="gr">TypeError</span>: <span class="n">handler() takes exactly 3 arguments (1 given)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Since hook handlers are likely to be spread across many locations in your projects, argument ordering changes make your code more likely to break. This is why gossip forces all arguments to be passed by keywords, and not as positionals.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">gossip</a></h1>





<p>
<iframe src="http://ghbtns.com/github-btn.html?user=vmalloc&repo=gossip&type=watch&count=true&size=large"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>


<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">Using Gossip</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#a-basic-example">A Basic Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="#hook-arguments">Hook Arguments</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="hook_groups.html">Definining Hooks in Groups</a></li>
</ul>


<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2014, Rotem Yaari.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.1.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.6.0</a>
      
      |
      <a href="_sources/hooks.txt"
          rel="nofollow">Page source</a></li>
    </div>

    

    
  </body>
</html>